<!DOCTYPE html>
<html lang="en" dir="ltr" ng:app="applications" ng:controller="page-controller">
  <head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.5/css/swiper.min.css">

    <link rel="stylesheet" href="{{ server_ip }}ext/css/default-player.css">
    <link rel="stylesheet" href="{{ server_ip }}ext/css/default-themes.css">
    <link  href="{{ server_ip }}themes/stylesheet_of_app_{{ app._id }}.css" rel="stylesheet">
    <style media="screen">
      .quiz-option-container{
        width: 60%;
        margin: 0px auto;
        display: flex;
        margin-top: 25px;
        margin-bottom: 20px;
        display: inherit;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.5/js/swiper.min.js" charset="utf-8"></script>
  </head>
  <body ng:controller="player" id="bddf">
    <input id="userId" type="hidden" name="" value="{{ user.id }}">
    <input id="appId" type="hidden" name="" value="{{ app._id }}">
    <!-- Time and Progress bar -->
    <div ng:if="_settings_.time_settings.is_with_time == true || _settings_.progression_bar.is_available == true" box-target-type="box-containers" box-target-class="quiz-option-container" class="quiz-option-container selector ng-scope">
      <!-- Progress -1 -->
      <div ng:if="_settings_.progression_bar.is_available == true" ng:include="'/time-progress-temps/progressbar-'+_settings_.progression_bar.progression_bar_layout+'.hbs'"></div>
      <!-- Time 1 -->
      <div ng:if="_settings_.time_settings.is_with_time == true" ng:include="'/time-progress-temps/time-'+ _settings_.time_settings.timer_layout+'.hbs'"></div>
    </div>
    <!-- Screens -->
    <div class="swiper-container">
      <div class="swiper-wrapper quiz-contents">
         <!-- Welcome Screen -->
         <div ng:if="_settings_.enable_screens == true && starting_screens == 0" class="swiper-slide welcoming-screen-x">
           <div class="container screen-container screen_opg_editor box-welcome-screen">
              <div ng:cloak class="description-body redactor-styles welcome-screen-text-block w-screen-text" ng:bind:html="_settings_.titles.title_start_with | apply_html"></div>
              <div class="qusu-details text-right">
                <button ng:click="start_the_quiz()" ng:cloak class="button-take-this welcome-screen-button" type="button" name="button">
                    <i class="fa fa-sign-in" aria-hidden="true"></i>
                    {> _settings_.label_btns.lbl_start_with <}
                </button>
              </div>
           </div>
         </div>
         <!-- Resume & expiration screens  -->
         <div ng:if="_settings_.enable_screens == true && starting_screens == 1" class="swiper-slide">
           <!-- Resume & expiration screens (final work) -->
           <div class="container x-widther screen-container screen-ending-starting screen_opg_editor welcome-screen select_box_brd welcome-screen-block box-resume-screen selector">
              <div>
                <div  class="resume-text   description-body redactor-styles select_texts welcome-screen-text-block box-resume-text" ng:bind:html="_settings_.titles.title_resume  | apply_html_with_date_filtering"></div>
                <div  class="expire-warning-text   description-body redactor-styles select_texts welcome-screen-text-block box-resume-text" ng:bind:html="_settings_.expiration.expire_warning  | apply_html_with_date_filtering"></div>
                  <div class="qusu-details text-right">
                     <span class="selector button-take-this select_button welcome-screen-button-block resume-screen-button ng-binding selector_line" type="button" name="button">
                        <i class="fa fa-sign-in" aria-hidden="true" style="outline-color: transparent;"></i>
                          {> _settings_.label_btns.lbl_resume_with <}
                    </span>
                  </div>

              </div>
           </div>
         </div>
         <!-- Question screens  -->
         <div ng:repeat="(obj_key , obj_val) in _questions_ track by $index" class="swiper-slide">
           <div class="container screen-container question_opg_editor_block question-screen-box">
             <!-- Question Container  -->
             <div class="question-container">
               <!-- Question Text -->
                <div class="question-body question_opg_editor question-box-text">
                  <!-- Question Label (Serial number) -->
                  <span  class="label-question question-label-box">
                    <span class="qs-numericals">{> $index + 1 <}</span>
                    <div class="arrow-right question-label-box-brd"></div>
                  </span>
                  <!-- Question Text -->
                  <span data:ng:bind:html="obj_val.question_body | apply_html" class="question-body-text question-data-text-bdy"></span>
                  <span class="required_option question-text-required-text"  ng:if="obj_val.answer_settings.is_required == true"> Required </span>
                </div>
                <!-- Question description -->
                 <div ng:if="obj_val.question_description.is_enabled == true" class="question-description-data questiondescdata">
                   <p class="description-block-box">
                     <i class="fa fa-dot-circle-o desc-icon-z-x" aria-hidden="true"></i>
                     <span ng:cloak data:ng:bind:html="obj_val.question_description.value | apply_html"></span>
                   </p>
                 </div>
                 <!-- Question Media Cases -->
                 <div ng:if="obj_val.media_question != undefined" class="question-data-media">
                   <!-- Case it an image  -->
                   <img class="image-responsive" ng:if="obj_val.media_question.media_type == 0 " ng:src="{> obj_val.media_question.Media_directory <}" alt="">
                   <!-- Case it video -->
                   <div ng:if="obj_val.media_question != undefined  && obj_val.media_question.media_type == 1" class="video-data-media question-video image-responsive">
                     <!-- case it vimeo or youtube  -->
                     <iframe ng:src="{> obj_val.media_question.embed_path | trust_iframe_url <}" ng:if="obj_val.media_question.video_type == 1 || obj_val.media_question.video_type == 0" width="100%" height="120px"></iframe>
                     <!-- case it mp4  -->
                     <video ng:if="obj_val.media_question.video_type == 2" controls>
                       <source ng:src="{> obj_val.media_question.mp4_option.mp4_url | trust_iframe_url <}" type="video/mp4">
                       <source ng:src="{> obj_val.media_question.mp4_option.ogg_url | trust_iframe_url <}" type="video/ogg">
                     </video>
                   </div>
                 </div>
             </div>
             <!-- Case question has many answers  -->
             <div ng:if="(obj_val.question_type == 0 || obj_val.question_type == 1 ) && obj_val.answer_settings.single_choice == false" class="notes question-warnning-box">
                  <span class="question_type__colr"> {> _settings_.label_btns.there_are_many_options <} </span>
             </div>
             <!--  Answer Container -->
             <div class="answer-container">
               <!-- Boolean && multiple choices && Media Choices -->
               <ul  ng:class="( (obj_val.question_type == 0 || obj_val.question_type == 1 ) && obj_val.answer_settings.single_choice == false )? 'border_line' : '' " class="answer_opg_editor question-list" ng:if="obj_val.question_type <= 2">
                 <li class="selector answer_opg_editor question-answer-row-select-blk question-answer-row-select answer_{>answer_value._id<}" ng:repeat="(anskey , answer_value) in obj_val.answers_format track by $index"  ng:class="list_answer_classes($parent.$index)">
                   <!-- Answer label -->
                   <!-- {> question_labels['label_' + _settings_.indexes.questions.toString()][question_index] | uppercase <} -->
                   <!-- <span box-target-type="box-labels" box-target-class="answer_label"  class="answer_label selector">{> question_labels['label_' + _settings_.indexes.answers.toString()][$index] | uppercase <}</span> -->
                   <label class="selector labels select_box_brd answer_numbering_block answer_numbering_block_box">{> question_labels['label_' + _settings_.indexes.answers.toString()][$index] | uppercase <}</label>

                  <!-- Answer Media  -->
                   <!-- answer media for 0 -->
                   <div ng:if="answer_value.media_optional != undefined && obj_val.question_type == 0" class="media-data-answer">
                     <!-- Case it Image -->
                     <img ng:if=" answer_value.media_optional != undefined &&  answer_value.media_optional.media_type ==0" ng:src="{>answer_value.media_optional.Media_directory + '?' + answer_value.media_optional.image_updated_date <}" class="image-responsive" alt="Image">
                     <!-- Case it video  -->
                     <div ng:if="answer_value.media_optional != undefined && answer_value.media_optional.media_type ==1" class="video_case text-center">
                        <!-- Case video iframes => youtube/ vimeo -->
                        <iframe class="iframe-selector" ng:if="(answer_value.media_optional.video_type == 0 || answer_value.media_optional.video_type == 1 )" ng:src="{> answer_value.media_optional.embed_path | trust_iframe_url <}" width="100%" height="120px"></iframe>
                        <!-- Case video tags => html mp4 video -->
                        <video ng:if="answer_value.media_optional.video_type == 2 " width="100%" height="120px" controls>
                            <source ng:if="answer_value.media_optional.mp4_option != undefined" ng:src="{>answer_value.media_optional.mp4_option.mp4_url | trust_iframe_url <}" type="video/mp4">
                            <source ng:if="answer_value.media_optional.mp4_option != undefined" ng:src="{>answer_value.media_optional.mp4_option.ogg_url | trust_iframe_url <}" type="video/ogg">
                        </video>
                     </div>
                   </div>
                   <!-- answer media for 1 -->
                   <div ng:if="obj_val.question_type == 1" class="media-data-answer">
                     <!-- Case There is not any media  -->
                     <div ng:if='answer_value.media_type == undefined' class="not-media-there">
                        <img ng:src="{> server_ip + 'img/media-default-icone.jpg'<}" class="image-responsive" alt="Image">
                     </div>
                     <!-- Case it Image -->
                     <img ng:if="answer_value.Media_directory != undefined && answer_value.media_type == 0" ng:src="{>answer_value.Media_directory + '?' + answer_value.image_updated_date <}" alt="Image"  class="image-responsive">
                     <!-- Case it video  -->
                     <div ng:if="answer_value.embed_path != undefined && answer_value.media_type ==1" class="video_case text-center">
                        <!-- Case video iframes => youtube/ vimeo -->
                        <iframe class="iframe-selector" ng:if="(answer_value.video_type == 0 || answer_value.video_type == 1 )" ng:src="{> answer_value.embed_path | trust_iframe_url <}" width="100%" height="120px"></iframe>
                        <!-- Case video tags => html mp4 video -->
                        <video ng:if="answer_value.video_type == 2 " class="video-mp4" controls>
                            <source ng:if="answer_value.mp4_option != undefined" ng:src="{>answer_value.mp4_option.mp4_url | trust_iframe_url <}" type="video/mp4">
                            <source ng:if="answer_value.mp4_option != undefined" ng:src="{>answer_value.mp4_option.ogg_url | trust_iframe_url <}" type="video/ogg">
                        </video>
                     </div>
                   </div>
                    <!-- Answer Texts  -->
                    <div ng:if="obj_val.question_type == 0" class="answer-texts answer_txt_val">
                      <span class="answer_text">{> answer_value.value <}</span>
                    </div>
                    <!-- Case Boolean questions -->
                    <div class="answer_txt_val" ng:if="obj_val.question_type == 2">
                      <span class="answer_text">{> answer_value.boolean_value <}</span>
                    </div>

                    <span class="iconxs-correct-answers fa fa-times wrong-ico"></span>
                    <span class="iconxs-correct-answers fa fa-check correct-ico"></span>
                 </li>
               </ul>
             </div>
             <!-- Messages and warnings -->
             <div ng:if="_settings_.auto_slide == true && obj_val.question_type <= 2 && obj_val.answer_settings.single_choice == true" class="question_notes answer-alarm-text answer-alarm-text-box " >
                <span class="fa fa-info-circle"></span>
                <span>{> _settings_.label_btns.when_you_solve <} </span>
             </div>
             <!-- Quiz Buttons -->
             <div ng:if ="_settings_.navigation_btns == true" class="qusu-details ques-questions text-right">
                <button ng:click="go_to_prev()" class="button-take-this back-answer-question-button"  type="button" name="button">
                      <i class="fa fa-angle-double-left" aria-hidden="true"></i>
                      {> _settings_.label_btns.lbl_back_with <}
                </button>
                <button ng:click="go_to_next()"  class="button-take-this continue-answer-question-button-block" type="button" name="button">
                  <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                  <span ng:if="$index != ( _questions_.length - 1 )">
                      {> _settings_.label_btns.lbl_continue_with <}
                  </span>
                  <span ng:if="$index == ( _questions_.length - 1 )">
                      {> _settings_.label_btns.lbl_finish_with <}
                  </span>
                </button>
              </div>
           </div>
         </div>
         <!-- Ending Screens  -->
         <div class="swiper-slide">Slide 4</div>
         <!-- Result Screens  -->
         <div class="swiper-slide">Slide 5</div>
      </div>
    </div>


    <script src="{{ server_ip }}ext/js/aa-application.js" charset="utf-8"></script>
    <script src="{{ server_ip }}ext/js/quiz-survey-player-app.js" charset="utf-8"></script>
  </body>
</html>
